import{_ as z,u as B,d,c as E,G as F,H as q,x as S,e as c,f as s,k as b,v as g,L as U,F as k,z as L,i as A,t as h,j as N,o as u,p as O,q as Q,s as j}from"./app-DHpn0u2P.js";import{c as G}from"./countries-Cj1GR0vB.js";const R={name:"Specialties",setup(){const a=B().state.auth.authorization,f=G,e=d({minage:"",maxage:"",gender:"",locations:[]}),n=d([]),p=d(""),t=d(!1),m=d(!1),M=d(null),C=E(()=>{if(!p.value)return f.slice(0,10);const l=p.value.toLowerCase();return f.filter(o=>o.toLowerCase().includes(l)&&!n.value.includes(o))}),x=l=>{const o=M.value;o&&!o.contains(l.target)&&(t.value=!1)};F(()=>{document.addEventListener("click",x),_()}),q(()=>{document.removeEventListener("click",x)});const D=l=>{if(n.value.length>=5){alert("You can only select up to 5 locations");return}n.value.includes(l)||(n.value.push(l),e.value.locations=n.value,p.value="",t.value=!1)},I=l=>{const o=n.value.indexOf(l);o>-1&&(n.value.splice(o,1),e.value.locations=n.value)},V=async()=>{var l,o,y;try{m.value=!0;const v={...e.value,locations:n.value};(await S.put("/api/specialties/update",{specialties:v},{headers:{Authorization:`Bearer ${a.token}`}})).data.success&&alert("Specialties updated successfully")}catch(v){console.error("Error updating specialties:",(l=v.response)==null?void 0:l.data);const w=((y=(o=v.response)==null?void 0:o.data)==null?void 0:y.message)||"Failed to update specialties. Please try again.";alert(w)}finally{m.value=!1}},_=async()=>{try{const l=await S.get("/api/specialties/getspecialties",{headers:{Authorization:`Bearer ${a.token}`}});if(l.data.success&&l.data.data){const o=l.data.data;e.value={minage:o.minage||"",maxage:o.maxage||"",gender:o.gender||"",locations:o.locations||[]},n.value=o.locations?JSON.parse(o.locations):[]}}catch(l){console.error("Error fetching specialties:",l),n.value=[]}};return{specialties:e,selectedLocations:n,searchQuery:p,showDropdown:t,processing:m,availableLocations:f,filteredLocations:C,addLocation:D,removeLocation:I,postSpecialties:V,getSpecialties:_}}},i=r=>(Q("data-v-4d661b9e"),r=r(),j(),r),T={class:"max-w-4xl mx-auto p-6 bg-white rounded-sm shadow-sm"},H=i(()=>s("h2",{class:"text-2xl font-semibold mb-4"},"Matchmaker Specialties",-1)),J={class:"mb-4"},P=i(()=>s("label",{class:"block uppercase font-bold text-xs text-gray-700 mb-2"}," My Clients are between the ages of ",-1)),Y={class:"flex space-x-2"},K={class:"mb-6"},W=i(()=>s("label",{class:"block uppercase font-bold text-xs text-gray-700 mb-2"}," My Clients are ",-1)),X=i(()=>s("option",{disabled:"",value:""},"Select Gender",-1)),Z=i(()=>s("option",{value:"male"},"Male",-1)),$=i(()=>s("option",{value:"female"},"Female",-1)),ee=i(()=>s("option",{value:"male_female"},"Male & Female",-1)),te=[X,Z,$,ee],se={class:"mb-4"},oe=i(()=>s("label",{class:"block uppercase font-bold text-xs text-gray-700 mb-2"}," My Clients are from the following locations (Select up to 5 locations) ",-1)),ae={class:"flex flex-wrap gap-2 mb-2"},le=["onClick"],ne={class:"relative",ref:"dropdownRef"},ie={key:0,class:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto"},re=["onClick"],de={class:"flex justify-end mt-6"},ce=["disabled"];function ue(r,a,f,e,n,p){return u(),c("div",T,[H,s("form",{class:"w-full",onSubmit:a[6]||(a[6]=N((...t)=>e.postSpecialties&&e.postSpecialties(...t),["prevent"]))},[s("div",J,[P,s("div",Y,[b(s("input",{type:"number","onUpdate:modelValue":a[0]||(a[0]=t=>e.specialties.minage=t),class:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Min Age",min:"18",id:"minage",required:""},null,512),[[g,e.specialties.minage]]),b(s("input",{type:"number","onUpdate:modelValue":a[1]||(a[1]=t=>e.specialties.maxage=t),class:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Max Age",min:"18",id:"maxage",required:""},null,512),[[g,e.specialties.maxage]])])]),s("div",K,[W,b(s("select",{"onUpdate:modelValue":a[2]||(a[2]=t=>e.specialties.gender=t),class:"w-full p-2 border border-gray-300 rounded-md",required:""},te,512),[[U,e.specialties.gender]])]),s("div",se,[oe,s("div",ae,[(u(!0),c(k,null,L(e.selectedLocations,t=>(u(),c("span",{key:t,class:"bg-blue-500 text-white rounded-full px-4 py-1 flex items-center"},[O(h(t)+" ",1),s("button",{type:"button",onClick:m=>e.removeLocation(t),class:"ml-2 text-white hover:text-red-400"}," Ã— ",8,le)]))),128))]),s("div",ne,[b(s("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=t=>e.searchQuery=t),placeholder:"Search for locations...",class:"w-full p-2 border border-gray-300 rounded-md",onFocus:a[4]||(a[4]=t=>e.showDropdown=!0),onInput:a[5]||(a[5]=(...t)=>r.onSearchInput&&r.onSearchInput(...t))},null,544),[[g,e.searchQuery]]),e.showDropdown&&e.filteredLocations.length?(u(),c("div",ie,[(u(!0),c(k,null,L(e.filteredLocations,t=>(u(),c("button",{key:t,type:"button",onClick:m=>e.addLocation(t),class:"w-full px-4 py-2 text-left hover:bg-gray-100 focus:outline-none"},h(t),9,re))),128))])):A("",!0)],512)]),s("div",de,[s("button",{type:"submit",disabled:e.processing,class:"bg-blue-500 text-white px-6 py-2 rounded-md hover:bg-blue-600 disabled:opacity-50"},h(e.processing?"Saving...":"Save"),9,ce)])],32)])}const fe=z(R,[["render",ue],["__scopeId","data-v-4d661b9e"]]);export{fe as default};
